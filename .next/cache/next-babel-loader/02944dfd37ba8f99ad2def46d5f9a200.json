{"ast":null,"code":"import mongoose, { mongo } from 'mongoose';\nconst connection = {};\n\nasync function connectDb() {\n  if (connection.isConnected) {\n    //use existing DB Connection\n    console.log(\"Using exisitng connection\");\n    return;\n  } //use a new DB Connection\n\n\n  const db = await mongoose.connect(process.env.MONGO_SRV, {\n    useCreateIndex: true,\n    useFindAndModify: false,\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  });\n  console.log(\"DB Connected\");\n  connection.isConnected = db.connections[0].readyState;\n}\n\nexport default connectDb;","map":{"version":3,"sources":["/home/papaspotts/git/scorebook-hackathon/utils/connectDb.js"],"names":["mongoose","mongo","connection","connectDb","isConnected","console","log","db","connect","process","env","MONGO_SRV","useCreateIndex","useFindAndModify","useNewUrlParser","useUnifiedTopology","connections","readyState"],"mappings":"AAAA,OAAOA,QAAP,IAAmBC,KAAnB,QAAgC,UAAhC;AAEA,MAAMC,UAAU,GAAE,EAAlB;;AAEA,eAAeC,SAAf,GAA2B;AACvB,MAAID,UAAU,CAACE,WAAf,EAA2B;AACvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACA;AACH,GALsB,CAOvB;;;AACA,QAAMC,EAAE,GAAG,MAAMP,QAAQ,CAACQ,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,SAA7B,EAAwC;AACrDC,IAAAA,cAAc,EAAE,IADqC;AAErDC,IAAAA,gBAAgB,EAAE,KAFmC;AAGrDC,IAAAA,eAAe,EAAE,IAHoC;AAIrDC,IAAAA,kBAAkB,EAAE;AAJiC,GAAxC,CAAjB;AAMAV,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AAEAJ,EAAAA,UAAU,CAACE,WAAX,GAAyBG,EAAE,CAACS,WAAH,CAAe,CAAf,EAAkBC,UAA3C;AACH;;AAED,eAAed,SAAf","sourcesContent":["import mongoose, { mongo } from 'mongoose';\n\nconst connection ={};\n\nasync function connectDb() {\n    if (connection.isConnected){\n        //use existing DB Connection\n        console.log(\"Using exisitng connection\");\n        return;\n    }\n\n    //use a new DB Connection\n    const db = await mongoose.connect(process.env.MONGO_SRV, {\n        useCreateIndex: true,\n        useFindAndModify: false,\n        useNewUrlParser: true,\n        useUnifiedTopology: true\n    })\n    console.log(\"DB Connected\");\n\n    connection.isConnected = db.connections[0].readyState;\n}\n\nexport default connectDb;"]},"metadata":{},"sourceType":"module"}